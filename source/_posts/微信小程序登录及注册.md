---
title: 微信小程序登录及注册
date: 2018-02-21 15:09:49
tags:
- js
categories:
- 微信小程序
---

关于微信小程序的登录及第一次注册的过程

<!-- more -->
1.登录过程
![](./微信小程序的登录.jpg '微信小程序的登录过程')
说明：图中画红线的地方是前端需要处理的过程，
>首先获取获取用户信息`wx.getUserInfo()` 
>允许调用小程序的`wx.login()`，获取临时登录凭证`code/iv/encryptedData` ---code--> 用`code`发起服务请求，获取自定义登录态`token`
>自定义登录态存入本地storage`wx.setStorageSync("token", token)` <--token--- `token`
>发起业务请求，header头部携带自定义登录态`token`
```javascript
wx.request({
    url: parm.url,
    data: parm.data,
    header: {
      token: app.globalData.GetToken()
    },
    method: param.method, 
    success:pram.success
})
```
---携带token-->返回数据

